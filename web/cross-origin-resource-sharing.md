# ğŸ’ğŸ» CORSì— ëŒ€ì²˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.
`CORS(Cross-Origin-Resource-Sharing)` ëŠ” `êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ ` ë¡œ ì„œë¡œ ë‹¤ë¥¸ ì¶œì²˜ë¼ë„ ë¦¬ì†ŒìŠ¤ ìš”ì²­, ì‘ë‹µì„ í—ˆìš© ë˜ëŠ” ë¹„í—ˆìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì •ì±…ì…ë‹ˆë‹¤.

ì˜ˆì „ì—ëŠ” ëª¨ë“  ì²˜ë¦¬ê°€ ê°™ì€ ë„ë©”ì¸ ì•ˆì—ì„œ ê°€ëŠ¥í–ˆìœ¼ë‚˜, í´ë¼ì´ì–¸íŠ¸ì™€ API ëŠ” ë‹¤ë¥¸ ë„ë©”ì¸ì¸ ê²½ìš°ê°€ ë§ì•„ì§ì— ë”°ë¼ CORS ì •ì±…ì´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.

CORS ì´ í•„ìš”í•œ ì´ìœ ëŠ” ì´ëŸ¬í•œ ì œì•½ì´ ì—†ë‹¤ë©´ í•´ì»¤ê°€ `CSRF(Cross-Site Request Forgery)`, `XSS(Cross-Site Scripting)` ë“±ì˜ ë°©ë²•ìœ¼ë¡œ ì›¹í˜ì´ì§€ì—ì„œ ì•…ì˜ì ì¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ ê°œì¸ ì •ë³´ë¥¼ ê°€ë¡œì±Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

### ì¶œì²˜(origin) ë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œ
ì¶œì²˜ë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì´ ì¤‘ í•˜ë‚˜ë¼ë„ ë‹¤ë¥´ë©´ CORS ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.
- í”„ë¡œí† ì½œ
- ë„ë©”ì¸(í˜¸ìŠ¤íŠ¸ ì´ë¦„)
- í¬íŠ¸

### ì˜ˆì‹œ
`https:(=Protocol)` //` www.myBlogPage.com(=Hostname)` : `3000(=Port)` / `review/write(=Pathname)` `?sort=asc...(=Search)` `#hash(=Hash)`
- ë„ë©”ì¸(Hostname) : myBlogPage.com
- ì¶œì²˜(Origin) : https://www.myBlogPage.com:3000
<br/>

![https://docs.tosspayments.com/resources/glossary/cors#cors%EA%B5%90%EC%B0%A8-%EC%B6%9C%EC%B2%98-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B3%B5%EC%9C%A0](/image/tosspayments-cors-url-img.png)
ì¶œì²˜ : [í† ìŠ¤í˜ì´ë¨¼ì¸  ê°œë°œìì„¼í„° í¬ìŠ¤íŒ… : CORS(êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ )](https://docs.tosspayments.com/resources/glossary/cors#cors%EA%B5%90%EC%B0%A8-%EC%B6%9C%EC%B2%98-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B3%B5%EC%9C%A0)
<br/>

## CORS ì—ëŸ¬ ëŒ€ì‘ ë°©ë²•
### ì„œë²„ì—ì„œ `Access-Control-Allow-Origin` ì‘ë‹µ í—¤ë” ì„¸íŒ…í•˜ê¸°
ì„œë²„ì—ì„œ HTTP ì‘ë‹µ í—¤ë”ë¥¼ ì„¤ì •í•´ì„œ ìš”ì²­ì„ ìˆ˜ë½í•  ì¶œì²˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```http
'Access-Control-Allow-Origin' : https://naver.com
```
`*` ì„ ì„¤ì •í•˜ë©´ ì¶œì²˜ì— ìƒê´€ì—†ì´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì™€ì¼ë“œì¹´ë“œì´ê¸° ë•Œë¬¸ì— ë³´ì•ˆì— ì·¨ì•½í•´ì§‘ë‹ˆë‹¤.

### í”„ë¡ì‹œ ì„œë²„ ì‚¬ìš©í•˜ê¸°
ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ ìš”ì²­í•˜ëŠ” ëŒ€ì‹  `í”„ë¡ì‹œ ì„œë²„`ë¥¼ ì´ìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¦¬ì†ŒìŠ¤ë¡œì˜ ìš”ì²­ì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì„ í†µí•´ CORS ì—ëŸ¬ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`í”„ë¡ì‹œ(Proxy)`ë€ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì˜ ì¤‘ê°„ì— ìœ„ì¹˜í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ëŒ€ì‹  ë°›ì•„ ì„œë²„ë¡œ ì „ë‹¬í•˜ê±°ë‚˜, ì„œë²„ì˜ ì‘ë‹µì„ ë°›ì•„ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ë§í•©ë‹ˆë‹¤.

ë‹¤ë§Œ, í”„ë¡ì‹œ ì„œë²„ë¥¼ ì§ì ‘ ìš´ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ë¬´ë£Œ ì„œë¹„ìŠ¤ëŠ” ì•…ìš©ë˜ëŠ” ì‚¬ë¡€ê°€ ë§ê¸° ë•Œë¬¸ì— ì‹¤ì „ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

### Chrome í™•ì¥ í”„ë¡œê·¸ë¨
`Allow CORS: Access-Control-Allow-Origin` í¬ë¡¬ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ë©´ ë¡œì»¬ í™˜ê²½ì—ì„œ API í…ŒìŠ¤íŠ¸ ì‹œ CORS ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
[> Allow CORS: Access-Control-Allow-Origin ë°”ë¡œê°€ê¸°](https://chromewebstore.google.com/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf?pli=1)

<br/>

## Next.js CORS ì—ëŸ¬
Next.js ì—ì„œëŠ” `next.config.js` íŒŒì¼ì—ì„œ `Rewrite` ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ í”„ë¡ì‹œ ì„¤ì •ì„ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Rewrite ëŠ” íŠ¹ì • URLë¡œì˜ ìš”ì²­ì„ ì„œë²„ ì¸¡ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
//next.config.js
async rewrites() {
  return [
    {
      source: '/api/:path*',
      destination: `${baseURL}/:path*`
    }
  ]
}
...
```

<br/>

## ì¶œì²˜
- https://docs.tosspayments.com/resources/glossary/cors#cors%EA%B5%90%EC%B0%A8-%EC%B6%9C%EC%B2%98-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B3%B5%EC%9C%A0
- https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-CORS-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%F0%9F%91%8F