# 🤷🏻‍♀️ 브라우저 저장소(Web Storage)에 대해 설명해주세요.([`LocalStorage`](#로컬-스토리지localstorage), [`SessionStorage`](#세션-스토리지sessionstorage), [`Cookie`](#쿠키cookie))

`Web Storage` 란 해당 도메인과 관련된 특정 데이터를 서버가 아닌 클라이언트 웹 브라우저에 저장할 수 있는 기능입니다.

### Web Storage 의 등장
Web Storage 는 `쿠키(Cookie)` 의 저장 용량 제한, 성능 이슈, 보안 문제 등을 해결하기 위해 등장한 기술입니다.

Web Storage 는 브라우저에 더 많은 데이터를 저장할 수 있으며(5MB ~ 10MB), HTTP 요청에 포함되지 않기 때문에 쿠키보다 네트워크 효율성이 좋은 장점이 있습니다.

<br/>

## 로컬 스토리지(LocalStorage)
로컬 스토리지는 웹 스토리지의 한 형태로 웹 브라우저에서 사용자의 데이터를 클라이언트 측에 저장하는데 사용됩니다.

### 특징
- 사용자의 브라우저에 키-값 쌍으로 데이터를 저장합니다.
- 데이터를 브라우저에 저장하기 때문에 서버에 부담을 주지 않습니다.
- 웹 페이지의 세션이 종료된 후에도 지속됩니다.
  - 사용자가 삭제하지 않는 한 계속 유지되므로 개인 정보 문제가 발생할 수 있습니다.
- 도메인마다 별도로 생성되어 같은 도메인에서 전역으로 접근이 가능해 XSS(Cross-Site Scripting) 공격에 취약합니다.
  - XSS : 악의적인 사용자가 스크립트를 삽입하여 웹 페이지에서 실행되도록 하는 공격

### 사용 예시
```javascript
// 조회
localStorage.getItem(key)
localStorage.key(index)

// 저장
localStorage.setItem(key, value)

// 삭제
localStorage.removeItem(key)

// 전체 삭제
localStorage.clear()
```

<br/>

## 세션 스토리지(SessionStorage)
세션 스토리지는 웹 스토리지의 한 형태로 웹 브라우저에서 사용자의 데이터를 클라이언트 측에 임시로 저장하는데 사용됩니다.

세션 스토리지는 한 세션 동안 사용자의 설정, 임시 데이터, 캐시 등을 저장하는데 유용합니다.

### 특징
- 세션 스토리지는 키-값 쌍으로 데이터를 저장합니다.
- 데이터를 브라우저에 저장하기 때문에 서버에 부담을 주지 않습니다.
- 브라우저가 종료되면 자동으로 삭제됩니다.
  - 따라서 서버에 부담을 주지 않습니다.
- 도메인마다 별도로 생성된다는 점에서 로컬 스토리지와 같지만, 같은 도메인이라도 브라우저가 다르면 서로 다른 영역이 됩니다.
- 로컬 스토리지와 마찬가지로 XSS 공격에 취약합니다.

### 사용 예시
```javascript
// 조회
sessionStorage.getItem(key)
sessionStorage.key(index)

// 저장
sessionStorage.setItem(key, value)

// 삭제
sessionStorage.removeItem(key)

// 전체 삭제
sessionStorage.clear()
```

<br/>

## 로컬 스토리지 vs 세션 스토리지 vs 쿠키 vs 세션
| 비교 | 로컬 스토리지 | 세션 스토리지 | 쿠키 | 세션 |
| :---: | --- | --- | --- | --- |
| 데이터 위치 | 클라이언트 측 | 클라이언트 측 | 클라이언트 측 | 서버 측 |
| 데이터 용량 | 5~10MB(브라우저마다 다름) | 5~10MB(브라우저마다 다름) | 4KB | 서버의 용량에 따라 다름 |
| 생명주기 | 삭제하지 않는 한 지속 | 한 세션동안 | 만료 날짜/시간에 따라 결정 | 사용자가 웹 사이트에 로그인하고 로그아웃할 때까지 |
| 접근성 | 클라이언트 측 | 클라이언트 측 | 서버, 클라이언트 측 모두 | 서버 측 |
| 보안성 | XSS 공격에 취약 | XSS 공격에 취약 | XSS, CSRF 공격 및 중간자 공격에 취약 | 쿠키를 통해 세션 ID가 전송되므로 쿠키의 보안 이슈에 주의해야 함 |
| HTTP 요청 및 응답 | 포함되지 않음 | 포함되지 않음 | HTTP 및 응답 헤더에 포함 | 직접 포함되지 않지만 세션 ID가 쿠키를 통해 전송됨 |
| 사례 | - 장기간 데이터<br/> - 사용자 설정 등 | - 한 세션동안 임시 데이터 저장<br/> - 상태 정보 등 | - 세션 관리<br/> - 사용자 추적 및 개인화 등 | - 사용자 인증<br/> - 사용자 세션 정보 관리 등 |

<br/>


---

## 쿠키(Cookie)
쿠키는 클라이언트 로컬에 저장되는 키와 값 형태의 작은 파일입니다.
쿠키에는 이름, 값, 만료시간, 경로 정보 등이 들어있습니다.
쿠키는 서버와 클라이언트가 지속적으로 데이터를 교환하기 위해 만들어졌습니다.

### 사용 목적
- 세션 관리(Session management)
  - 서버에 저장해야할 정보 관리
  - 로그인, 사용자 정보, 접속 시간, 장바구니, 게임 스코어 등
- 개인화(Personalization)
  - 사용자에 맞는 페이지 제공
  - 사용자 선호 옵션, 테마, 페이지 등 제공
- 트래킹(Tracking)
  - 사용자 행동 기록 및 패턴 분석

### 쿠키의 문제점
1. 적은 저장 용량(4KB)
2. 모든 HTTP 요청마다 쿠키가 전송
  _→ 불필용한 트리픽 증가로 성능 저하_
3. 보안 문제(CSRF, XSS 등)
4. 기타
    - 한 사이트당 20개의 쿠키 제한
    - 문자열만 전송 가능

<br/>

## 세션(Session)
세션은 서버 측에서 유지되는 상태 정보입니다.
클라이언트가 서버에 접속하면 고유 세션 ID 가 생성되고, 쿠키를 통해 클라이언트에 전달됩니다.
서버는 세션 ID 를 기반으로 세션 DB 를 식별 및 관리합니다.

### 특징
- 만료 기간을 설정할 수 있습니다.
  - 일정 시간동안 액세스하지 않으면 자동으로 세션 만료됩니다.
- 쿠키를 기반으로 동작합니다.
  - 세션 ID 는 쿠키를 통해서 전송됩니다.
- 보안 측면에서 쿠키보다는 안전합니다.
  - 서버에 저장되므로 클라이언트 측에서 접근할 수 없습니다.

### 문제점
- 서버 자원 소모
  - 세션 데이터의 크기가 커지면 서버의 부담이 커집니다.
  - 따라서 크기를 최소화하고 필요한 정보만 저장하는 것이 좋습니다.
- 세션 데이터 손실
  - 세션에 저장된 데이터는 일정 시간 지나면 만료됩니다.
  - 중요한 정보는 만료되기 전 추가적 조치가 필요합니다.
- 확장성 제한
  - 여러 대의 서버로 구성된 환경에서 세션을 공유하기 위한 추가적인 구현이 필요합니다.

<br/>

---

## JWT(JSON Web Token)
사용자 인증 정보를 JSON 형식으로 표현한 보안 토큰으로 서버에서 생성하고 클라이언트에 전달됩니다.

### 특징
- JWT 토큰은 HTTP 요청의 Authorization 헤더에 포함되어 서버로 전송됩니다.
- 기본적으로 데이터는 암호화되지 않습니다.
  - 비밀번호와 같은 민감한 정보는 JWT 에 담지 않아야 합니다.

```javascript
const url = "https://front-interview"

axios.post(`${url}/login`, {
  username: username,
  password: password
})
.then(res => {
  const token = res.data.token;
  localStorage.setItem('jwt', token);

  axios.get(`${url}/user`, {
    headers: {
      Authorization: 'Bearer ' + token
    }
  })
  ...
})
```

<br/>


## 참고
- https://ryuhojin.tistory.com/10
- https://akdl911215.tistory.com/317
- https://han41858.tistory.com/54
- https://gist.github.com/john-raymon/23e5bf6cf228effc9c32918c5ab14fbd